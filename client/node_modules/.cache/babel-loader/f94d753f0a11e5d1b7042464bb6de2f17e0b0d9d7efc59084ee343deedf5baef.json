{"ast":null,"code":"// Notification utilities\n\nclass NotificationManager {\n  constructor() {\n    this.soundEnabled = true;\n    this.browserNotificationsEnabled = false;\n    this.checkBrowserNotificationPermission();\n  }\n\n  // Check if browser notifications are supported and permitted\n  checkBrowserNotificationPermission() {\n    if ('Notification' in window) {\n      if (Notification.permission === 'granted') {\n        this.browserNotificationsEnabled = true;\n      } else if (Notification.permission === 'default') {\n        // We'll request permission when needed\n        this.browserNotificationsEnabled = false;\n      }\n    }\n  }\n\n  // Request browser notification permission\n  async requestBrowserNotificationPermission() {\n    if (!('Notification' in window)) {\n      console.log('Browser notifications not supported');\n      return false;\n    }\n    if (Notification.permission === 'granted') {\n      this.browserNotificationsEnabled = true;\n      return true;\n    }\n    if (Notification.permission === 'default') {\n      const permission = await Notification.requestPermission();\n      if (permission === 'granted') {\n        this.browserNotificationsEnabled = true;\n        return true;\n      }\n    }\n    this.browserNotificationsEnabled = false;\n    return false;\n  }\n\n  // Play notification sound\n  playNotificationSound() {\n    if (!this.soundEnabled) return;\n    try {\n      // Create a simple beep sound using Web Audio API\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n      const oscillator = audioContext.createOscillator();\n      const gainNode = audioContext.createGain();\n      oscillator.connect(gainNode);\n      gainNode.connect(audioContext.destination);\n      oscillator.frequency.value = 800;\n      oscillator.type = 'sine';\n      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);\n      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);\n      oscillator.start(audioContext.currentTime);\n      oscillator.stop(audioContext.currentTime + 0.5);\n    } catch (error) {\n      console.log('Sound notification failed:', error);\n    }\n  }\n\n  // Show browser notification\n  showBrowserNotification(title, options = {}) {\n    if (!this.browserNotificationsEnabled || document.hasFocus()) {\n      return;\n    }\n    const notificationOptions = {\n      icon: '/favicon.ico',\n      badge: '/favicon.ico',\n      ...options\n    };\n    try {\n      const notification = new Notification(title, notificationOptions);\n      notification.onclick = () => {\n        window.focus();\n        notification.close();\n      };\n      setTimeout(() => notification.close(), 5000);\n    } catch (error) {\n      console.log('Browser notification failed:', error);\n    }\n  }\n\n  // Toggle sound notifications\n  toggleSound() {\n    this.soundEnabled = !this.soundEnabled;\n    return this.soundEnabled;\n  }\n\n  // Toggle browser notifications\n  async toggleBrowserNotifications() {\n    if (this.browserNotificationsEnabled) {\n      this.browserNotificationsEnabled = false;\n    } else {\n      await this.requestBrowserNotificationPermission();\n    }\n    return this.browserNotificationsEnabled;\n  }\n}\n\n// Create a singleton instance\nconst notificationManager = new NotificationManager();\nexport default notificationManager;","map":{"version":3,"names":["NotificationManager","constructor","soundEnabled","browserNotificationsEnabled","checkBrowserNotificationPermission","window","Notification","permission","requestBrowserNotificationPermission","console","log","requestPermission","playNotificationSound","audioContext","AudioContext","webkitAudioContext","oscillator","createOscillator","gainNode","createGain","connect","destination","frequency","value","type","gain","setValueAtTime","currentTime","exponentialRampToValueAtTime","start","stop","error","showBrowserNotification","title","options","document","hasFocus","notificationOptions","icon","badge","notification","onclick","focus","close","setTimeout","toggleSound","toggleBrowserNotifications","notificationManager"],"sources":["C:/Users/User/Desktop/MERNWEEK5/real-time-communication-with-socket-io-wacuk-a/client/src/utils/notifications.js"],"sourcesContent":["// Notification utilities\n\nclass NotificationManager {\n  constructor() {\n    this.soundEnabled = true;\n    this.browserNotificationsEnabled = false;\n    this.checkBrowserNotificationPermission();\n  }\n\n  // Check if browser notifications are supported and permitted\n  checkBrowserNotificationPermission() {\n    if ('Notification' in window) {\n      if (Notification.permission === 'granted') {\n        this.browserNotificationsEnabled = true;\n      } else if (Notification.permission === 'default') {\n        // We'll request permission when needed\n        this.browserNotificationsEnabled = false;\n      }\n    }\n  }\n\n  // Request browser notification permission\n  async requestBrowserNotificationPermission() {\n    if (!('Notification' in window)) {\n      console.log('Browser notifications not supported');\n      return false;\n    }\n\n    if (Notification.permission === 'granted') {\n      this.browserNotificationsEnabled = true;\n      return true;\n    }\n\n    if (Notification.permission === 'default') {\n      const permission = await Notification.requestPermission();\n      if (permission === 'granted') {\n        this.browserNotificationsEnabled = true;\n        return true;\n      }\n    }\n\n    this.browserNotificationsEnabled = false;\n    return false;\n  }\n\n  // Play notification sound\n  playNotificationSound() {\n    if (!this.soundEnabled) return;\n\n    try {\n      // Create a simple beep sound using Web Audio API\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n      const oscillator = audioContext.createOscillator();\n      const gainNode = audioContext.createGain();\n\n      oscillator.connect(gainNode);\n      gainNode.connect(audioContext.destination);\n\n      oscillator.frequency.value = 800;\n      oscillator.type = 'sine';\n\n      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);\n      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);\n\n      oscillator.start(audioContext.currentTime);\n      oscillator.stop(audioContext.currentTime + 0.5);\n    } catch (error) {\n      console.log('Sound notification failed:', error);\n    }\n  }\n\n  // Show browser notification\n  showBrowserNotification(title, options = {}) {\n    if (!this.browserNotificationsEnabled || document.hasFocus()) {\n      return;\n    }\n\n    const notificationOptions = {\n      icon: '/favicon.ico',\n      badge: '/favicon.ico',\n      ...options\n    };\n\n    try {\n      const notification = new Notification(title, notificationOptions);\n      \n      notification.onclick = () => {\n        window.focus();\n        notification.close();\n      };\n\n      setTimeout(() => notification.close(), 5000);\n    } catch (error) {\n      console.log('Browser notification failed:', error);\n    }\n  }\n\n  // Toggle sound notifications\n  toggleSound() {\n    this.soundEnabled = !this.soundEnabled;\n    return this.soundEnabled;\n  }\n\n  // Toggle browser notifications\n  async toggleBrowserNotifications() {\n    if (this.browserNotificationsEnabled) {\n      this.browserNotificationsEnabled = false;\n    } else {\n      await this.requestBrowserNotificationPermission();\n    }\n    return this.browserNotificationsEnabled;\n  }\n}\n\n// Create a singleton instance\nconst notificationManager = new NotificationManager();\n\nexport default notificationManager;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}